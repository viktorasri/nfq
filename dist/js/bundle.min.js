"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var ordersUrl="data/orders.json",orders=[],orderspage=1,orderPerPage=10;function clearContent(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function renderOrders(t){var e=document.querySelector(".ordersList");if(e)if(clearContent(e),0!==t.length)t.sort(compare),t.forEach(function(t){var r='\n\t\t\t\t\t\t<li class="order hide">\n                \t\t\t<span class="date">'+t.orderdate+'</span>\n                \t\t\t<span class="sku">'+t.sku+'</span>\n                \t\t\t<span class="customer">'+t.name+" "+t.lastname+"</span>\n\t\t\t            </li>\n\t\t";e.insertAdjacentHTML("beforeend",r)}),ordersPagination(orderspage);else{e.insertAdjacentHTML("beforeend",'<li class="warn">No search result was found, please try other keywords</li>')}}function ordersPagination(t){var e=document.querySelectorAll(".order");e.forEach(function(t){return t.classList.add("hide")});for(var r=0;r<t*orderPerPage;r++){if(!e[r])return;e[r].classList.remove("hide")}}function searchOrder(){orderspage=1,renderOrders(findMatchesInOrders(this.value,orders,this.dataset.id))}function findMatchesInOrders(t,e,r){return e.filter(function(e){var n=new RegExp(t,"gi");return e.fullname=e.name+" "+e.lastname,e[r].match(n)})}function compare(t,e){return t.orderdate<e.orderdate?1:t.orderdate>e.orderdate?-1:0}fetch(ordersUrl).then(function(t){return t.json()}).then(function(t){orders.push.apply(orders,_toConsumableArray(t)),renderOrders(orders)}),$(".show-more-orders").click(function(){var t=Math.ceil(document.querySelectorAll(".order").length);orderspage<t/orderPerPage&&ordersPagination(++orderspage)}),$(".show-less-orders").click(function(){orderspage>1&&ordersPagination(--orderspage)}),$(".searchInOrders").keyup(searchOrder),$(".searchInOrders").change(searchOrder);var productsUrl="data/projects.json",products=[],page=1,showPerPage=4;function clearContent(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function renderProducts(t){var e=document.querySelector(".product-list");if(e)if(clearContent(e),0!==t.length)t.forEach(function(t){var r='\n\t\t\t\t\t\t<li class="product hide">\n                \t\t\t<img src="'+t.img.thumb+'" alt="'+t.title+'">\n\t\t\t                <div class="top-product-container">\n\t\t\t                    <div class="country">'+t.filtertags.country+'</div>\n\t\t\t                    <div class="price">'+t.price+'<i class="fa fa-eur"></i></div>\n\t\t\t                    <div class="date">'+t.date+'</div>\n\t\t\t                </div>\n\t\t\t                <div class="title">\n\t\t\t                    <h3>'+t.title+"</h3>\n\t\t\t                </div>\n\t\t\t            </li>\n\t\t";e.insertAdjacentHTML("beforeend",r)}),pagination(page),getFilters(t);else{e.insertAdjacentHTML("beforeend",'<li class="warn">No search result was found, please try other keywords</li>')}}function pagination(t){var e=document.querySelectorAll(".product");e.forEach(function(t){return t.classList.add("hide")});for(var r=0;r<t*showPerPage;r++){if(!e[r])return;e[r].classList.remove("hide")}}function findMatches(t,e){return e.filter(function(e){var r=new RegExp(t,"gi");return e.title.match(r)||e.filtertags.country.match(r)})}function search(){page=1,renderProducts(findMatches(this.value,products))}function getFilters(t){var e=t.reduce(function(t,e){for(var r in e.filtertags){var n=e.filtertags[r];t[r]||(t[r]={}),t[r][n]||(t[r][n]=0),t[r][n]++}return t},{}),r="";for(var n in e){var a="";for(var s in e[n])a+='<li data-tag="'+n+'" data-value="'+s+'">'+s+"(<span>"+e[n][s]+"</span>)</li>";r+="\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h5>"+n+"</h5>\n\t\t\t\t\t\t<ul>"+a+"</ul>\n\t\t\t\t\t</div>\n\t\t"}var o=document.querySelector(".filters");o.innerHTML=r,o.addEventListener("click",function(e){"LI"===e.target.nodeName&&filterByTags(e.target.dataset.tag,e.target.dataset.value,t),"SPAN"===e.target.nodeName&&filterByTags(e.target.parentNode.dataset.tag,e.target.parentNode.dataset.value,t)})}function filterByTags(t,e,r){renderProducts(r.filter(function(r){return r.filtertags[t]===e}))}fetch(productsUrl).then(function(t){return t.json()}).then(function(t){products.push.apply(products,_toConsumableArray(t)),renderProducts(products)}),$(".search").keyup(search),$(".search").change(search),$(".show-more").click(function(){var t=Math.ceil(document.querySelectorAll(".product").length);page<t/showPerPage&&pagination(++page)}),$(".show-less").click(function(){page>1&&pagination(--page)}),$(".btn-filter").click(function(){$(".filters").slideToggle().toggleClass("hide")}),$(".mobile-nav").click(function(){$(".main-nav").toggleClass("menu-active")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyLmpzIiwic2NyaXB0LmpzIl0sIm5hbWVzIjpbIm9yZGVyc1VybCIsIm9yZGVycyIsIm9yZGVyc3BhZ2UiLCJvcmRlclBlclBhZ2UiLCJjbGVhckNvbnRlbnQiLCJub2RlIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwicmVuZGVyT3JkZXJzIiwiZGF0YSIsIm9yZGVyc0xpc3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJsZW5ndGgiLCJzb3J0IiwiY29tcGFyZSIsImZvckVhY2giLCJvcmRlciIsImNvbnRlbnQiLCJvcmRlcmRhdGUiLCJza3UiLCJuYW1lIiwibGFzdG5hbWUiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJvcmRlcnNQYWdpbmF0aW9uIiwicGFnZU5vIiwibGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsaSIsImNsYXNzTGlzdCIsImFkZCIsIm4iLCJyZW1vdmUiLCJzZWFyY2hPcmRlciIsImZpbmRNYXRjaGVzSW5PcmRlcnMiLCJ0aGlzIiwidmFsdWUiLCJkYXRhc2V0IiwiaWQiLCJ3b3JkVG9NYXRjaCIsInByb3AiLCJmaWx0ZXIiLCJyZWdleCIsIlJlZ0V4cCIsIm1hdGNoIiwiYSIsImIiLCJmZXRjaCIsInRoZW4iLCJibG9iIiwianNvbiIsInB1c2giLCJhcHBseSIsIl90b0NvbnN1bWFibGVBcnJheSIsIiQiLCJjbGljayIsImxpc3ROIiwiTWF0aCIsImNlaWwiLCJrZXl1cCIsImNoYW5nZSIsInByb2R1Y3RzVXJsIiwicHJvZHVjdHMiLCJwYWdlIiwic2hvd1BlclBhZ2UiLCJyZW5kZXJQcm9kdWN0cyIsInByb2R1Y3RMaXN0IiwicHJvZHVjdCIsImltZyIsInRodW1iIiwidGl0bGUiLCJmaWx0ZXJ0YWdzIiwiY291bnRyeSIsInByaWNlIiwiZGF0ZSIsInBhZ2luYXRpb24iLCJnZXRGaWx0ZXJzIiwiZmluZE1hdGNoZXMiLCJzZWFyY2giLCJmaWx0ZXJzIiwicmVkdWNlIiwib2JqIiwiaXRlbSIsImtleSIsImh0bWwiLCJmaWx0ZXJNZW51IiwiaW5uZXJIVE1MIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJub2RlTmFtZSIsImZpbHRlckJ5VGFncyIsInRhZyIsInBhcmVudE5vZGUiLCJzbGlkZVRvZ2dsZSIsInRvZ2dsZUNsYXNzIl0sIm1hcHBpbmdzIjoic0pBQUEsSUFBQUEsVUFBQSxtQkFDQUMsVUFDQUMsV0FBQSxFQUNBQyxhQUFBLEdBV0EsU0FBQUMsYUFBQUMsR0FDQSxLQUFBQSxFQUFBQyxZQUNBRCxFQUFBRSxZQUFBRixFQUFBQyxZQUlBLFNBQUFFLGFBQUFDLEdBQ0EsSUFBQUMsRUFBQUMsU0FBQUMsY0FBQSxlQUNBLEdBQUFGLEVBRUEsR0FEQU4sYUFBQU0sR0FDQSxJQUFBRCxFQUFBSSxPQUtBSixFQUFBSyxLQUFBQyxTQUNBTixFQUFBTyxRQUFBLFNBQUFDLEdBQ0EsSUFBQUMsRUFBQUEsbUZBRUFELEVBQUFFLFVBRkEsb0RBR0FGLEVBQUFHLElBSEEseURBSUFILEVBQUFJLEtBSkEsSUFJQUosRUFBQUssU0FKQSx5Q0FPQVosRUFBQWEsbUJBQUEsWUFBQUwsS0FFQU0saUJBQUF0QixnQkFoQkEsQ0FFQVEsRUFBQWEsbUJBQUEsWUFEQSxnRkFrQkEsU0FBQUMsaUJBQUFDLEdBRUEsSUFBQUMsRUFBQWYsU0FBQWdCLGlCQUFBLFVBQ0FELEVBQUFWLFFBQUEsU0FBQVksR0FBQSxPQUFBQSxFQUFBQyxVQUFBQyxJQUFBLFVBR0EsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEVBQUFOLEVBQUF0QixhQUFBNEIsSUFBQSxDQUNBLElBQUFMLEVBQUFLLEdBQUEsT0FDQUwsRUFBQUssR0FBQUYsVUFBQUcsT0FBQSxTQUtBLFNBQUFDLGNBQ0EvQixXQUFBLEVBRUFNLGFBREEwQixvQkFBQUMsS0FBQUMsTUFBQW5DLE9BQUFrQyxLQUFBRSxRQUFBQyxLQUlBLFNBQUFKLG9CQUFBSyxFQUFBdEMsRUFBQXVDLEdBQ0EsT0FBQXZDLEVBQUF3QyxPQUFBLFNBQUF4QixHQUNBLElBQUF5QixFQUFBLElB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dkIsRUFIQSxnQ0FPQSxJQUFBbUUsRUFBQTFFLFNBQUFDLGNBQUEsWUFDQXlFLEVBQUFDLFVBQUFGLEVBQ0FDLEVBQUFFLGlCQUFBLFFBQUEsU0FBQUMsR0FDQSxPQUFBQSxFQUFBQyxPQUFBQyxVQUFBQyxhQUFBSCxFQUFBQyxPQUFBcEQsUUFBQXVELElBQUFKLEVBQUFDLE9BQUFwRCxRQUFBRCxNQUFBMEIsR0FDQSxTQUFBMEIsRUFBQUMsT0FBQUMsVUFBQUMsYUFBQUgsRUFBQUMsT0FBQUksV0FBQXhELFFBQUF1RCxJQUFBSixFQUFBQyxPQUFBSSxXQUFBeEQsUUFBQUQsTUFBQTBCLEtBS0EsU0FBQTZCLGFBQUFSLEVBQUEvQyxFQUFBM0IsR0FFQXdELGVBREF4RCxFQUFBZ0MsT0FBQSxTQUFBeUMsR0FBQSxPQUFBQSxFQUFBWCxXQUFBWSxLQUFBL0MsS0FqSEFXLE1BQUFjLGFBQ0FiLEtBQUEsU0FBQUMsR0FBQSxPQUFBQSxFQUFBQyxTQUNBRixLQUFBLFNBQUF2QyxHQUNBcUQsU0FBQVgsS0FBQUMsTUFBQVUsU0FBQVQsbUJBQUE1QyxJQUNBd0QsZUFBQUgsWUFpSEFSLEVBQUEsV0FBQUssTUFBQW1CLFFBQ0F4QixFQUFBLFdBQUFNLE9BQUFrQixRQUVBeEIsRUFBQSxjQUFBQyxNQUFBLFdBQ0EsSUFBQUMsRUFBQUMsS0FBQUMsS0FBQS9DLFNBQUFnQixpQkFBQSxZQUFBZCxRQUNBa0QsS0FBQVAsRUFBQVEsYUFFQVcsYUFEQVosUUFLQVQsRUFBQSxjQUFBQyxNQUFBLFdBQ0FRLEtBQUEsR0FFQVksYUFEQVosUUFLQVQsRUFBQSxlQUFBQyxNQUFBLFdBQ0FELEVBQUEsWUFBQXdDLGNBQUFDLFlBQUEsVUFJQXpDLEVBQUEsZUFBQUMsTUFBQSxXQUNBRCxFQUFBLGFBQUF5QyxZQUFBIiwiZmlsZSI6ImJ1bmRsZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgb3JkZXJzVXJsID0gJ2RhdGEvb3JkZXJzLmpzb24nO1xyXG52YXIgb3JkZXJzID0gW107XHJcbnZhciBvcmRlcnNwYWdlID0gMTtcclxudmFyIG9yZGVyUGVyUGFnZSA9IDEwO1xyXG5cclxuZmV0Y2gob3JkZXJzVXJsKVxyXG5cdC50aGVuKGJsb2IgPT4gYmxvYi5qc29uKCkpXHJcblx0LnRoZW4oZGF0YSA9PiB7XHJcblx0XHRvcmRlcnMucHVzaCguLi5kYXRhKTtcclxuXHRcdHJlbmRlck9yZGVycyhvcmRlcnMpO1xyXG5cdH0pO1xyXG5cclxuXHJcbi8vUmVtb3ZlIGFsbCBjaGlsZHMgZnJvbSBzZWxlY3RlZCBub2RlXHJcbmZ1bmN0aW9uIGNsZWFyQ29udGVudChub2RlKSB7XHJcblx0d2hpbGUgKG5vZGUuZmlyc3RDaGlsZCkge1xyXG5cdFx0bm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyT3JkZXJzKGRhdGEpIHtcclxuXHR2YXIgb3JkZXJzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcmRlcnNMaXN0Jyk7XHJcblx0aWYgKCFvcmRlcnNMaXN0KSByZXR1cm47XHJcblx0Y2xlYXJDb250ZW50KG9yZGVyc0xpc3QpO1xyXG5cdGlmIChkYXRhLmxlbmd0aD09PTApIHtcclxuXHRcdGxldCB3YXJuID0gJzxsaSBjbGFzcz1cIndhcm5cIj5ObyBzZWFyY2ggcmVzdWx0IHdhcyBmb3VuZCwgcGxlYXNlIHRyeSBvdGhlciBrZXl3b3JkczwvbGk+J1xyXG5cdFx0b3JkZXJzTGlzdC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsd2FybilcclxuXHRcdHJldHVyblxyXG5cdH1cclxuXHRkYXRhLnNvcnQoY29tcGFyZSlcclxuXHRkYXRhLmZvckVhY2gob3JkZXI9PntcclxuXHRcdGxldCBjb250ZW50ID0gYFxyXG5cdFx0XHRcdFx0XHQ8bGkgY2xhc3M9XCJvcmRlciBoaWRlXCI+XHJcbiAgICAgICAgICAgICAgICBcdFx0XHQ8c3BhbiBjbGFzcz1cImRhdGVcIj4ke29yZGVyLm9yZGVyZGF0ZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICBcdFx0XHQ8c3BhbiBjbGFzcz1cInNrdVwiPiR7b3JkZXIuc2t1fTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIFx0XHRcdDxzcGFuIGNsYXNzPVwiY3VzdG9tZXJcIj4ke29yZGVyLm5hbWV9ICR7b3JkZXIubGFzdG5hbWV9PC9zcGFuPlxyXG5cdFx0XHQgICAgICAgICAgICA8L2xpPlxyXG5cdFx0YDtcclxuXHRcdG9yZGVyc0xpc3QuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLGNvbnRlbnQpXHJcblx0fSk7XHJcblx0b3JkZXJzUGFnaW5hdGlvbihvcmRlcnNwYWdlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3JkZXJzUGFnaW5hdGlvbihwYWdlTm8pIHtcclxuXHQvL2hpZGUgYWxsIGxpc3QgZWxlbWVudHNcclxuXHR2YXIgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcmRlcicpO1xyXG5cdGxpc3QuZm9yRWFjaChsaSA9PiBsaS5jbGFzc0xpc3QuYWRkKCdoaWRlJykpO1xyXG5cdFxyXG5cdC8vcmVtb3ZlIGhpZGUgY2xhc3MgZnJvbSBzZWxlY3RlZCBhbW91bnQgb2YgcGFnZXNcclxuXHRmb3IgKGxldCBuID0gMDsgbjxwYWdlTm8qb3JkZXJQZXJQYWdlOyBuKyspe1xyXG5cdFx0aWYgKCFsaXN0W25dKSByZXR1cm5cclxuXHRcdGxpc3Rbbl0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpXHJcblx0fVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc2VhcmNoT3JkZXIoKSB7XHJcblx0b3JkZXJzcGFnZSA9IDE7IC8vcmVzZXRzIHBhZ2luZyB2YWx1ZVxyXG5cdHZhciBmaWx0ZXJlZEFycmF5ID0gZmluZE1hdGNoZXNJbk9yZGVycyh0aGlzLnZhbHVlLG9yZGVycyx0aGlzLmRhdGFzZXQuaWQpO1xyXG5cdHJlbmRlck9yZGVycyhmaWx0ZXJlZEFycmF5KVxyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kTWF0Y2hlc0luT3JkZXJzKHdvcmRUb01hdGNoLCBvcmRlcnMsIHByb3ApIHtcclxuXHRyZXR1cm4gb3JkZXJzLmZpbHRlcihvcmRlcj0+e1xyXG5cdFx0Y29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKHdvcmRUb01hdGNoLCdnaScpO1xyXG5cdFx0b3JkZXJbXCJmdWxsbmFtZVwiXSA9YCR7b3JkZXIubmFtZX0gJHtvcmRlci5sYXN0bmFtZX1gO1xyXG5cdFx0cmV0dXJuIG9yZGVyW3Byb3BdLm1hdGNoKHJlZ2V4KVxyXG5cdH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbXBhcmUoYSxiKSB7XHJcblx0aWYgKGEub3JkZXJkYXRlIDwgYi5vcmRlcmRhdGUpXHJcblx0XHRyZXR1cm4gMTtcclxuXHRpZiAoYS5vcmRlcmRhdGUgPiBiLm9yZGVyZGF0ZSlcclxuXHRcdHJldHVybiAtMTtcclxuXHRyZXR1cm4gMDtcclxufVxyXG5cclxuXHJcbiQoJy5zaG93LW1vcmUtb3JkZXJzJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cdHZhciBsaXN0TiA9IE1hdGguY2VpbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3JkZXInKS5sZW5ndGgpO1xyXG5cdGlmIChvcmRlcnNwYWdlIDwgbGlzdE4vb3JkZXJQZXJQYWdlKXtcclxuXHRcdG9yZGVyc3BhZ2UrKztcclxuXHRcdG9yZGVyc1BhZ2luYXRpb24ob3JkZXJzcGFnZSlcclxuXHR9XHJcbn0pO1xyXG5cclxuJCgnLnNob3ctbGVzcy1vcmRlcnMnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0aWYgKG9yZGVyc3BhZ2UgPiAxKXtcclxuXHRcdG9yZGVyc3BhZ2UtLTtcclxuXHRcdG9yZGVyc1BhZ2luYXRpb24ob3JkZXJzcGFnZSlcclxuXHR9XHJcbn0pO1xyXG5cclxuJCgnLnNlYXJjaEluT3JkZXJzJykua2V5dXAoc2VhcmNoT3JkZXIpO1xyXG4kKCcuc2VhcmNoSW5PcmRlcnMnKS5jaGFuZ2Uoc2VhcmNoT3JkZXIpOyIsInZhciBwcm9kdWN0c1VybCA9ICdkYXRhL3Byb2plY3RzLmpzb24nO1xyXG52YXIgcHJvZHVjdHMgPSBbXTtcclxudmFyIHBhZ2UgPSAxO1xyXG52YXIgc2hvd1BlclBhZ2UgPSA0O1xyXG5cclxuZmV0Y2gocHJvZHVjdHNVcmwpXHJcblx0LnRoZW4oYmxvYiA9PiBibG9iLmpzb24oKSlcclxuXHQudGhlbihkYXRhID0+IHtcclxuXHRcdHByb2R1Y3RzLnB1c2goLi4uZGF0YSlcclxuXHRcdHJlbmRlclByb2R1Y3RzKHByb2R1Y3RzKTtcclxuXHR9KTtcclxuXHJcblxyXG4vL1JlbW92ZSBhbGwgY2hpbGRzIGZyb20gc2VsZWN0ZWQgbm9kZVxyXG5mdW5jdGlvbiBjbGVhckNvbnRlbnQobm9kZSkge1xyXG5cdHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpIHtcclxuXHRcdG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5maXJzdENoaWxkKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiByZW5kZXJQcm9kdWN0cyhkYXRhKSB7XHJcblx0dmFyIHByb2R1Y3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtbGlzdCcpO1xyXG5cdGlmICghcHJvZHVjdExpc3QpIHJldHVybjtcclxuXHRjbGVhckNvbnRlbnQocHJvZHVjdExpc3QpO1xyXG5cdGlmIChkYXRhLmxlbmd0aD09PTApIHtcclxuXHRcdGxldCB3YXJuID0gJzxsaSBjbGFzcz1cIndhcm5cIj5ObyBzZWFyY2ggcmVzdWx0IHdhcyBmb3VuZCwgcGxlYXNlIHRyeSBvdGhlciBrZXl3b3JkczwvbGk+J1xyXG5cdFx0cHJvZHVjdExpc3QuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLHdhcm4pXHJcblx0XHRyZXR1cm5cclxuXHR9XHJcblx0ZGF0YS5mb3JFYWNoKHByb2R1Y3Q9PntcclxuXHRcdHZhciBjb250ZW50ID0gYFxyXG5cdFx0XHRcdFx0XHQ8bGkgY2xhc3M9XCJwcm9kdWN0IGhpZGVcIj5cclxuICAgICAgICAgICAgICAgIFx0XHRcdDxpbWcgc3JjPVwiJHtwcm9kdWN0LmltZy50aHVtYn1cIiBhbHQ9XCIke3Byb2R1Y3QudGl0bGV9XCI+XHJcblx0XHRcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3QtY29udGFpbmVyXCI+XHJcblx0XHRcdCAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvdW50cnlcIj4ke3Byb2R1Y3QuZmlsdGVydGFncy5jb3VudHJ5fTwvZGl2PlxyXG5cdFx0XHQgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmljZVwiPiR7cHJvZHVjdC5wcmljZX08aSBjbGFzcz1cImZhIGZhLWV1clwiPjwvaT48L2Rpdj5cclxuXHRcdFx0ICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0ZVwiPiR7cHJvZHVjdC5kYXRlfTwvZGl2PlxyXG5cdFx0XHQgICAgICAgICAgICAgICAgPC9kaXY+XHJcblx0XHRcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj5cclxuXHRcdFx0ICAgICAgICAgICAgICAgICAgICA8aDM+JHtwcm9kdWN0LnRpdGxlfTwvaDM+XHJcblx0XHRcdCAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHRcdFx0ICAgICAgICAgICAgPC9saT5cclxuXHRcdGA7XHJcblx0XHRwcm9kdWN0TGlzdC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsY29udGVudClcclxuXHR9KTtcclxuXHRwYWdpbmF0aW9uKHBhZ2UpO1xyXG5cdGdldEZpbHRlcnMoZGF0YSk7XHJcbn1cclxuXHJcbi8vdG9nZ2xlIGNsYXNzIGhpZGUgZm9yIHNlbGVjdGVkIHBhZ2VzXHJcbmZ1bmN0aW9uIHBhZ2luYXRpb24ocGFnZU5vKSB7XHJcblx0Ly9oaWRlIGFsbCBsaXN0IGVsZW1lbnRzXHJcblx0dmFyIGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZHVjdCcpO1xyXG5cdGxpc3QuZm9yRWFjaChsaSA9PiBsaS5jbGFzc0xpc3QuYWRkKCdoaWRlJykpO1xyXG5cdC8vcmVtb3ZlIGhpZGUgY2xhc3MgZnJvbSBzZWxlY3RlZCBhbW91bnQgb2YgcGFnZXNcclxuXHRmb3IgKGxldCBuID0gMDsgbjxwYWdlTm8qc2hvd1BlclBhZ2U7IG4rKyl7XHJcblx0XHRpZiAoIWxpc3Rbbl0pIHJldHVyblxyXG5cdFx0bGlzdFtuXS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJylcclxuXHR9XHJcbn1cclxuXHJcbi8vcmV0dXJuIGFycmF5IHdpdGggaXRlbXMgd2hpY2ggbWF0Y2ggc2VhcmNoIGlucHV0IHZhbHVlXHJcbmZ1bmN0aW9uIGZpbmRNYXRjaGVzKHdvcmRUb01hdGNoLCBwcm9kdWN0cykge1xyXG5cdHJldHVybiBwcm9kdWN0cy5maWx0ZXIocHJvZHVjdD0+e1xyXG5cdFx0Y29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKHdvcmRUb01hdGNoLCdnaScpO1xyXG5cdFx0cmV0dXJuIHByb2R1Y3QudGl0bGUubWF0Y2gocmVnZXgpIHx8IHByb2R1Y3QuZmlsdGVydGFncy5jb3VudHJ5Lm1hdGNoKHJlZ2V4KVxyXG5cdH0pXHJcbn1cclxuXHJcbi8vcmVuZGVyIHNlYXJjaCByZXN1bHRzXHJcbmZ1bmN0aW9uIHNlYXJjaCgpIHtcclxuXHRwYWdlID0gMTsgLy9yZXNldHMgcGFnaW5nIHZhbHVlXHJcblx0dmFyIGZpbHRlcmVkQXJyYXkgPSBmaW5kTWF0Y2hlcyh0aGlzLnZhbHVlLHByb2R1Y3RzKTtcclxuXHRyZW5kZXJQcm9kdWN0cyhmaWx0ZXJlZEFycmF5KVxyXG59XHJcblxyXG5cclxuXHJcbi8vY3JlYXRlcyBuZXcgb2JqZWN0IHdpdGggZmlsdGVyIGtleXMgYW5kIHZhbHVlc1xyXG5mdW5jdGlvbiBnZXRGaWx0ZXJzKHByb2R1Y3RzKXtcclxuXHRjb25zdCBmaWx0ZXJzID0gcHJvZHVjdHMucmVkdWNlKGZ1bmN0aW9uKG9iaiwgaXRlbSkge1xyXG5cdFx0Zm9yKHZhciBrZXkgaW4gaXRlbS5maWx0ZXJ0YWdzKSB7XHJcblx0XHRcdHZhciB2YWx1ZSA9IGl0ZW0uZmlsdGVydGFnc1trZXldO1xyXG5cdFx0XHRpZiAoIW9ialtrZXldKXtcclxuXHRcdFx0XHRvYmpba2V5XSA9IHt9O1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghb2JqW2tleV1bdmFsdWVdKSB7XHJcblx0XHRcdFx0b2JqW2tleV1bdmFsdWVdID0gMDtcclxuXHRcdFx0fVxyXG5cdFx0XHRvYmpba2V5XVt2YWx1ZV0rK1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG9iajtcclxuXHR9LCB7fSk7XHJcblx0Ly9yZW5kZXIgZmlsdGVyc1xyXG5cdHZhciBodG1sID0gJyc7XHJcblx0Zm9yICh2YXIgZmlsdGVyIGluIGZpbHRlcnMpe1xyXG5cdFx0dmFyIGNvbnRlbnQgPSAnJztcclxuXHRcdGZvciAodmFyIHByb3AgaW4gZmlsdGVyc1tmaWx0ZXJdKXtcclxuXHRcdFx0Y29udGVudCArPSBgPGxpIGRhdGEtdGFnPVwiJHtmaWx0ZXJ9XCIgZGF0YS12YWx1ZT1cIiR7cHJvcH1cIj4ke3Byb3B9KDxzcGFuPiR7ZmlsdGVyc1tmaWx0ZXJdW3Byb3BdfTwvc3Bhbj4pPC9saT5gO1xyXG5cdFx0fVxyXG5cdFx0aHRtbCArPSBgXHJcblx0XHRcdFx0XHQ8ZGl2PlxyXG5cdFx0XHRcdFx0XHQ8aDU+JHtmaWx0ZXJ9PC9oNT5cclxuXHRcdFx0XHRcdFx0PHVsPiR7Y29udGVudH08L3VsPlxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRgO1xyXG5cdH1cclxuXHRjb25zdCBmaWx0ZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbHRlcnMnKVxyXG5cdGZpbHRlck1lbnUuaW5uZXJIVE1MID0gaHRtbDtcclxuXHRmaWx0ZXJNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZSkgPT4ge1xyXG5cdFx0ZS50YXJnZXQubm9kZU5hbWUgPT09ICdMSSc/IGZpbHRlckJ5VGFncyhlLnRhcmdldC5kYXRhc2V0LnRhZyxlLnRhcmdldC5kYXRhc2V0LnZhbHVlLHByb2R1Y3RzKSA6IG51bGxcclxuXHRcdGUudGFyZ2V0Lm5vZGVOYW1lID09PSAnU1BBTic/IGZpbHRlckJ5VGFncyhlLnRhcmdldC5wYXJlbnROb2RlLmRhdGFzZXQudGFnLGUudGFyZ2V0LnBhcmVudE5vZGUuZGF0YXNldC52YWx1ZSxwcm9kdWN0cykgOiBudWxsXHJcblx0fSlcclxufVxyXG5cclxuLy9yZW5kZXJzIGZpbHRlcmVkIGl0ZW1zXHJcbmZ1bmN0aW9uIGZpbHRlckJ5VGFncyhrZXksdmFsdWUsZGF0YSkge1xyXG5cdHZhciBmaWx0ZXJlZEFycmF5ID0gZGF0YS5maWx0ZXIoaXRlbSA9PiBpdGVtLmZpbHRlcnRhZ3Nba2V5XSA9PT0gdmFsdWUpO1xyXG5cdHJlbmRlclByb2R1Y3RzKGZpbHRlcmVkQXJyYXkpO1xyXG59XHJcblxyXG4kKCcuc2VhcmNoJykua2V5dXAoc2VhcmNoKTtcclxuJCgnLnNlYXJjaCcpLmNoYW5nZShzZWFyY2gpO1xyXG5cclxuJCgnLnNob3ctbW9yZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHR2YXIgbGlzdE4gPSBNYXRoLmNlaWwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2R1Y3QnKS5sZW5ndGgpO1xyXG5cdGlmIChwYWdlIDwgbGlzdE4vc2hvd1BlclBhZ2Upe1xyXG5cdFx0cGFnZSsrO1xyXG5cdFx0cGFnaW5hdGlvbihwYWdlKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuJCgnLnNob3ctbGVzcycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRpZiAocGFnZSA+IDEpe1xyXG5cdFx0cGFnZS0tO1xyXG5cdFx0cGFnaW5hdGlvbihwYWdlKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuJCgnLmJ0bi1maWx0ZXInKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0JCgnLmZpbHRlcnMnKS5zbGlkZVRvZ2dsZSgpLnRvZ2dsZUNsYXNzKCdoaWRlJyk7XHJcbn0pXHJcblxyXG5cclxuJCgnLm1vYmlsZS1uYXYnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0JCgnLm1haW4tbmF2JykudG9nZ2xlQ2xhc3MoJ21lbnUtYWN0aXZlJylcclxufSkiXX0=
